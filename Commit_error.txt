============================= test session starts ==============================
platform linux -- Python 3.11.14, pytest-9.0.2, pluggy-1.6.0 -- /opt/hostedtoolcache/Python/3.11.14/x64/bin/python
cachedir: .pytest_cache
rootdir: /home/runner/work/NeuronOS/NeuronOS
configfile: pytest.ini (WARNING: ignoring pytest config in pyproject.toml!)
plugins: cov-7.0.0
collecting ... collected 110 items / 4 deselected / 106 selected
tests/test_audit_suite.py::TestPhase1Security::test_vm_name_validation_rigorous[my-vm-01-True] PASSED [  0%]
tests/test_audit_suite.py::TestPhase1Security::test_vm_name_validation_rigorous[Windows_10-True] PASSED [  1%]
tests/test_audit_suite.py::TestPhase1Security::test_vm_name_validation_rigorous[vm.test-True] PASSED [  2%]
tests/test_audit_suite.py::TestPhase1Security::test_vm_name_validation_rigorous[test; rm -rf /-False] PASSED [  3%]
tests/test_audit_suite.py::TestPhase1Security::test_vm_name_validation_rigorous[test | ls-False] PASSED [  4%]
tests/test_audit_suite.py::TestPhase1Security::test_vm_name_validation_rigorous[test & echo hello-False] PASSED [  5%]
tests/test_audit_suite.py::TestPhase1Security::test_vm_name_validation_rigorous[test$(whoami)-False] PASSED [  6%]
tests/test_audit_suite.py::TestPhase1Security::test_vm_name_validation_rigorous[`id`-False] PASSED [  7%]
tests/test_audit_suite.py::TestPhase1Security::test_vm_name_validation_rigorous[test\nls-False] PASSED [  8%]
tests/test_audit_suite.py::TestPhase1Security::test_vm_name_validation_rigorous[<script>-False] PASSED [  9%]
tests/test_audit_suite.py::TestPhase1Security::test_vm_name_validation_rigorous[-False] PASSED [ 10%]
tests/test_audit_suite.py::TestPhase1Security::test_vm_name_validation_rigorous[aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa-False] PASSED [ 11%]
tests/test_audit_suite.py::TestPhase1Security::test_path_traversal_prevention[http://test.com/app.exe-app.exe] PASSED [ 12%]
tests/test_audit_suite.py::TestPhase1Security::test_path_traversal_prevention[http://test.com/../../../etc/passwd-etcpasswd] PASSED [ 13%]
tests/test_audit_suite.py::TestPhase1Security::test_path_traversal_prevention[http://test.com/%2e%2e%2f%2e%2e%2fconfig-config] PASSED [ 14%]
tests/test_audit_suite.py::TestPhase1Security::test_path_traversal_prevention[http://test.com/path/with/sep\\file-file] PASSED [ 15%]
tests/test_audit_suite.py::TestPhase1Security::test_ensure_within_directory_enforcement PASSED [ 16%]
tests/test_audit_suite.py::TestPhase2Features::test_proton_versions_detection PASSED [ 16%]
tests/test_audit_suite.py::TestPhase2Features::test_libvirt_manager_delegation PASSED [ 17%]
tests/test_audit_suite.py::TestPhase3GuestIntegration::test_guest_client_new_commands PASSED [ 18%]
tests/test_audit_suite.py::TestPhase3GuestIntegration::test_application_migration_mapping PASSED [ 19%]
tests/test_audit_suite.py::TestPhase4Robustness::test_retry_logic_with_backoff PASSED [ 20%]
tests/test_audit_suite.py::TestPhase4Robustness::test_managed_resource_cleanup_on_error PASSED [ 21%]
tests/test_audit_suite.py::TestPhase4Robustness::test_require_root_protection PASSED [ 22%]
tests/test_audit_suite.py::TestPhase5QA::test_update_verifier_health_check PASSED [ 23%]
tests/test_audit_suite.py::TestPhase5QA::test_compilation_integrity PASSED [ 24%]
tests/test_common.py::TestExceptions::test_neuron_error_basic PASSED     [ 25%]
tests/test_common.py::TestExceptions::test_neuron_error_with_details PASSED [ 26%]
tests/test_common.py::TestExceptions::test_neuron_error_to_dict PASSED   [ 27%]
tests/test_common.py::TestExceptions::test_vm_not_found_error PASSED     [ 28%]
tests/test_common.py::TestExceptions::test_iommu_error_contains_hints PASSED [ 29%]
tests/test_common.py::TestDecorators::test_handle_errors_returns_default PASSED [ 30%]
tests/test_common.py::TestDecorators::test_handle_errors_passes_through PASSED [ 31%]
tests/test_common.py::TestDecorators::test_handle_errors_reraise PASSED  [ 32%]
tests/test_common.py::TestDecorators::test_retry_succeeds_eventually PASSED [ 33%]
tests/test_common.py::TestDecorators::test_retry_exhausts_attempts PASSED [ 33%]
tests/test_common.py::TestDecorators::test_timed_decorator PASSED        [ 34%]
tests/test_common.py::TestLogging::test_setup_logging_creates_handlers PASSED [ 35%]
tests/test_common.py::TestLogging::test_get_logger_prefix PASSED         [ 36%]
tests/test_common.py::TestResources::test_managed_resource_acquires PASSED [ 37%]
tests/test_common.py::TestResources::test_managed_resource_reuses PASSED [ 38%]
tests/test_common.py::TestResources::test_resource_pool_creates_and_returns PASSED [ 39%]
tests/test_common.py::TestResources::test_cleanup_registry PASSED        [ 40%]
tests/test_common.py::TestSingletons::test_thread_safe_singleton PASSED  [ 41%]
tests/test_common.py::TestSingletons::test_atomic_counter PASSED         [ 42%]
tests/test_common.py::TestFeatures::test_feature_manager_executes_primary PASSED [ 43%]
tests/test_common.py::TestFeatures::test_feature_manager_uses_fallback PASSED [ 44%]
tests/test_common.py::TestFeatures::test_feature_manager_raises_without_fallback PASSED [ 45%]
tests/test_gpu_scanner.py::TestGPUDevice::test_device_creation PASSED    [ 46%]
tests/test_gpu_scanner.py::TestGPUDevice::test_intel_integrated_detection PASSED [ 47%]
tests/test_gpu_scanner.py::TestGPUDevice::test_amd_discrete_detection PASSED [ 48%]
tests/test_gpu_scanner.py::TestGPUScanner::test_scanner_initialization PASSED [ 49%]
tests/test_gpu_scanner.py::TestGPUScanner::test_scanner_pci_ids_cache PASSED [ 50%]
tests/test_gpu_scanner.py::TestGPUScanner::test_get_passthrough_candidate_prefers_non_boot PASSED [ 50%]
tests/test_gpu_scanner.py::TestGPUScanner::test_get_boot_gpu PASSED      [ 51%]
tests/test_gpu_scanner.py::TestGPUScanner::test_to_json PASSED           [ 52%]
tests/test_gpu_scanner.py::TestGPUScanner::test_no_passthrough_candidate_when_all_boot_vga PASSED [ 53%]
tests/test_gpu_scanner.py::TestGPUScannerOnRealHardware::test_scan_returns_list PASSED [ 54%]
tests/test_gpu_scanner.py::TestGPUScannerOnRealHardware::test_all_devices_have_addresses PASSED [ 55%]
tests/test_gpu_scanner.py::TestGPUScannerOnRealHardware::test_all_devices_have_vendor_ids PASSED [ 56%]
tests/test_guest_agent.py::TestGuestAgentProtocol::test_framing_and_send PASSED [ 57%]
tests/test_guest_agent.py::TestGuestAgentProtocol::test_message_receiving_fragments PASSED [ 58%]
tests/test_guest_agent.py::TestGuestAgentProtocol::test_tls_wrapping PASSED [ 59%]
tests/test_hardware_detect.py::TestGPUScanner::test_import PASSED        [ 60%]
tests/test_hardware_detect.py::TestGPUScanner::test_scanner_initializes PASSED [ 61%]
tests/test_hardware_detect.py::TestGPUScanner::test_scan_parses_lspci_output PASSED [ 62%]
tests/test_hardware_detect.py::TestGPUScanner::test_gpu_device_dataclass FAILED [ 63%]
tests/test_hardware_detect.py::TestIOMMUParser::test_import PASSED       [ 64%]
tests/test_hardware_detect.py::TestIOMMUParser::test_parser_initializes PASSED [ 65%]
tests/test_hardware_detect.py::TestIOMMUParser::test_iommu_group_dataclass FAILED [ 66%]
tests/test_hardware_detect.py::TestCPUDetector::test_import PASSED       [ 66%]
tests/test_hardware_detect.py::TestCPUDetector::test_detect_intel PASSED [ 67%]
tests/test_hardware_detect.py::TestCPUDetector::test_detect_amd PASSED   [ 68%]
tests/test_hardware_detect.py::TestConfigGenerator::test_import PASSED   [ 69%]
tests/test_hardware_detect.py::TestConfigGenerator::test_vfio_config_dataclass FAILED [ 70%]
tests/test_hardware_detect.py::TestConfigGenerator::test_detect_bootloader_systemd PASSED [ 71%]
tests/test_hardware_detect.py::TestConfigGenerator::test_detect_bootloader_grub PASSED [ 72%]
tests/test_security.py::test_safe_filename_protection PASSED             [ 73%]
tests/test_security.py::test_ensure_within_directory PASSED              [ 74%]
tests/test_security.py::test_vm_name_validation PASSED                   [ 75%]
tests/test_security.py::test_verify_download PASSED                      [ 76%]
tests/test_security.py::test_atomic_write PASSED                         [ 77%]
tests/test_security.py::test_migration_logic PASSED                      [ 78%]
tests/test_store.py::TestAppInfo::test_basic_creation PASSED             [ 79%]
tests/test_store.py::TestAppInfo::test_to_dict PASSED                    [ 80%]
tests/test_store.py::TestAppInfo::test_from_dict PASSED                  [ 81%]
tests/test_store.py::TestAppCatalog::test_load_catalog PASSED            [ 82%]
tests/test_store.py::TestAppCatalog::test_get_app PASSED                 [ 83%]
tests/test_store.py::TestAppCatalog::test_search_by_text PASSED          [ 83%]
tests/test_store.py::TestAppCatalog::test_search_by_category PASSED      [ 84%]
tests/test_store.py::TestAppCatalog::test_search_by_layer PASSED         [ 85%]
tests/test_store.py::TestAppCatalog::test_vm_required_apps PASSED        [ 86%]
tests/test_store.py::TestAppCatalog::test_add_app PASSED                 [ 87%]
tests/test_store.py::TestAppCatalog::test_save_catalog PASSED            [ 88%]
tests/test_vm_manager.py::TestVMConfig::test_basic_config_creation PASSED [ 89%]
tests/test_vm_manager.py::TestVMConfig::test_cpu_total_vcpus PASSED      [ 90%]
tests/test_vm_manager.py::TestVMConfig::test_memory_size_conversion PASSED [ 91%]
tests/test_vm_manager.py::TestVMConfig::test_validation_no_name PASSED   [ 92%]
tests/test_vm_manager.py::TestVMConfig::test_validation_gpu_without_address PASSED [ 93%]
tests/test_vm_manager.py::TestVMConfig::test_validation_looking_glass_requires_gpu PASSED [ 94%]
tests/test_vm_manager.py::TestVMConfig::test_windows11_gaming_preset PASSED [ 95%]
tests/test_vm_manager.py::TestVMConfig::test_config_to_dict PASSED       [ 96%]
tests/test_vm_manager.py::TestVMConfig::test_config_from_dict PASSED     [ 97%]
tests/test_vm_manager.py::TestLibvirtManager::test_manager_initialization PASSED [ 98%]
tests/test_vm_manager.py::TestGPUPassthroughManager::test_manager_initialization PASSED [ 99%]
tests/test_vm_manager.py::TestGPUPassthroughManager::test_get_current_driver PASSED [100%]
=================================== FAILURES ===================================
___________________ TestGPUScanner.test_gpu_device_dataclass ___________________
tests/test_hardware_detect.py:51: in test_gpu_device_dataclass
    gpu = GPUDevice(
E   TypeError: GPUDevice.__init__() got an unexpected keyword argument 'driver'
__________________ TestIOMMUParser.test_iommu_group_dataclass __________________
tests/test_hardware_detect.py:85: in test_iommu_group_dataclass
    device = IOMMUDevice(
E   TypeError: IOMMUDevice.__init__() missing 3 required positional arguments: 'class_name', 'vendor_id', and 'device_id'
________________ TestConfigGenerator.test_vfio_config_dataclass ________________
tests/test_hardware_detect.py:154: in test_vfio_config_dataclass
    config = VFIOConfig(
E   TypeError: VFIOConfig.__init__() missing 2 required positional arguments: 'passthrough_gpu' and 'boot_gpu'
=========================== short test summary info ============================
FAILED tests/test_hardware_detect.py::TestGPUScanner::test_gpu_device_dataclass - TypeError: GPUDevice.__init__() got an unexpected keyword argument 'driver'
FAILED tests/test_hardware_detect.py::TestIOMMUParser::test_iommu_group_dataclass - TypeError: IOMMUDevice.__init__() missing 3 required positional arguments: 'class_name', 'vendor_id', and 'device_id'
FAILED tests/test_hardware_detect.py::TestConfigGenerator::test_vfio_config_dataclass - TypeError: VFIOConfig.__init__() missing 2 required positional arguments: 'passthrough_gpu' and 'boot_gpu'
================= 3 failed, 103 passed, 4 deselected in 0.90s ==================
Error: Process completed with exit code 1.
0s
1s
Post job cleanup.
/usr/bin/git version
git version 2.52.0
Temporarily overriding HOME='/home/runner/work/_temp/d95698fe-1dc1-4384-a247-b1e76650cc44' before making global git config changes
Adding repository directory to the temporary git global config as a safe directory
/usr/bin/git config --global --add safe.directory /home/runner/work/NeuronOS/NeuronOS
/usr/bin/git config --local --name-only --get-regexp core\.sshCommand
/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'core\.sshCommand' && git config --local --unset-all 'core.sshCommand' || :"
/usr/bin/git config --local --name-only --get-regexp http\.https\:\/\/github\.com\/\.extraheader
http.https://github.com/.extraheader
/usr/bin/git config --local --unset-all http.https://github.com/.extraheader
/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'http\.https\:\/\/github\.com\/\.extraheader' && git config --local --unset-all 'http.https://github.com/.extraheader' || :"
/usr/bin/git config --local --name-only --get-regexp ^includeIf\.gitdir:
/usr/bin/git submodule foreach --recursive git config --local --show-origin --name-only --get-regexp remote.origin.url